services:
  webcode:
    build: .
    container_name: webcode
    ports:
      - "23000:3080"
      - "25173:5180"
      - "25901:5901"
      - "26080:6080"
      - "28789:18800"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - projects:/home/ubuntu/projects
      - vibe-kanban-data:/home/ubuntu/.local/share/vibe-kanban
      - theia-data:/home/ubuntu/.theia
      - user-data:/home/ubuntu/.local/share
      - gitconfig:/home/ubuntu/.gitconfig-vol
      - openclaw-data:/home/ubuntu/.openclaw
    environment:
      - MODE=${MODE:-desktop}
      - AUTH_USER=${AUTH_USER:-admin}
      - AUTH_PASSWORD=${AUTH_PASSWORD:-changeme}
      - PASSWORD=${VNC_PASSWORD:-changeme}
      - VNC_RESOLUTION=${VNC_RESOLUTION:-1920x1080}
      - CF_TUNNEL_TOKEN=${CF_TUNNEL_TOKEN:-}
    shm_size: "512m"
    security_opt:
      - seccomp=unconfined
    restart: unless-stopped

volumes:
  projects:
  vibe-kanban-data:
  theia-data:
  user-data:
  openclaw-data:
  gitconfig:
