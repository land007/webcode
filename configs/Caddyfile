{
	admin off
}

# Dashboard (Main Entry - Basic Auth)
:20000 {
	basicauth {
		{$AUTH_USER} {$AUTH_PASS_HASH}
	}
	reverse_proxy 127.0.0.1:10000
}

# Theia IDE
:20001 {
	basicauth {
		{$AUTH_USER} {$AUTH_PASS_HASH}
	}
	reverse_proxy 127.0.0.1:10001
}

# Vibe Kanban
:20002 {
	basicauth {
		{$AUTH_USER} {$AUTH_PASS_HASH}
	}
	reverse_proxy 127.0.0.1:10002
}

# OpenClaw (has its own --auth token, no Caddy basicauth needed)
:20003 {
	reverse_proxy 127.0.0.1:10003 {
		flush_interval -1
		header_up X-Real-IP {remote_host}
		header_up X-Forwarded-For {remote_host}
		header_up X-Forwarded-Proto {scheme}
		transport http {
			read_timeout 86400s
			write_timeout 86400s
		}
	}
}

# noVNC (Web VNC client) + Audio WebSocket (path-based routing)
:20004 {
	handle_path /audio {
		reverse_proxy 127.0.0.1:10006
	}
	handle /websockify {
		reverse_proxy 127.0.0.1:10004
	}
	reverse_proxy 127.0.0.1:10004
}
